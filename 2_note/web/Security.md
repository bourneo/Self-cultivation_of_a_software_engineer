# Security

---

## 基础部分

---

### 数字签名

网络传输过程中需要经过很多中间节点，虽然数据无法被解密，但可能被篡改。数字签名可以校验数据的完整性。

数字签名的作用：

- 能确定消息确实是由发送方签名并发出来的，因为别人假冒不了发送方的签名。
- 数字签名能确定消息的完整性，证明数据是否未被篡改过。

将一段文本先用 Hash 函数生成消息摘要，然后用发送者的私钥加密生成数字签名，与原文文一起传送给接收者。

接收者只有用发送者的公钥才能解密被加密的摘要信息，然后用 HASH 函数对收到的原文产生一个摘要信息，与上一步得到的摘要信息对比。

如果相同，则说明收到的信息是完整的，在传输过程中没有被修改，否则说明信息被修改过，因此数字签名能够验证信息的完整性。

### SQL 注入

SQL 注入的原理是将 SQL 代码伪装到输入参数中，传递到服务器解析并执行的一种攻击手法。

### SQL 注入应对方法

预编译：

- 使用预编译手段，绑定参数是最好的防 SQL 注入的方法。
- 目前许多的 ORM 框架及 JDBC 等都实现了 SQL 预编译和参数绑定功能，攻击者的恶意 SQL 会被当做 SQL 的参数而不是 SQL 命令被执行。
- 在 mybatis 的 mapper 文件中，对于传递的参数我们一般是使用 # 和 $ 来获取参数值。
- 当使用 #时，变量是占位符，就是一般我们使用 java 的 jdbc 的 PrepareStatement 时的占位符，所有可以防止 sql 注入。
- 当使用 $ 时，变量就是直接追加在 sql 中，一般会有 sql 注入问题。

使用正则表达式过滤传入的参数。

过滤参数中含有的一些数据库关键词。

### 加密算法

加密算法分对称加密和非对称加密，其中对称加密算法的加密与解密密钥相同，非对称加密算法的加密密钥与解密密钥不同。

常见的对称加密算法主要有 DES、3DES、AES 等。

常见的非对称算法主要有 RSA、DSA 等。

此外，还有一类不需要密钥的散列算法。 散列算法主要有 SHA-1、MD5 等。

### 对称加密

在对称加密算法中，使用的密钥只有一个，发送和接收双方都使用这个密钥对数据进行加密和解密。

数据加密过程：

- 在对称加密算法中，数据发送方将明文(原始数据)和加密密钥一起经过特殊加密处理，生成复杂的、加密密文进行发送。

数据解密过程：数据接收方收到密文后，若想读取原数据，则需要使用加密使用的密钥及相同算法的逆算法对加密的密文进行解密，才能使其恢复成可读明文。

### 非对称加密

非对称加密算法，它需要两个密钥，一个称为公开密钥 (public key)，即公钥，另一个称为私有密钥 (private key)，即私钥。

因为加密和解密使用的是两个不同的密钥，所以这种算法称为非对称加密算法。

- 如果使用公钥对数据进行加密，只有用对应的私钥才能进行解密。
- 如果使用私钥对数据进行加密，只有用对应的公钥才能进行解密。

例子：甲方生成一对密钥并将其中的一把作为公钥向其它人公开，得到该公钥的乙方使用该密钥对机密信息进行加密后再发送给甲方，甲方再使用自己保存的另一把专用密钥 (私钥)，对加密后的信息进行解密。

### XSS

跨站脚本是一种网站应用程序的安全漏洞攻击，是代码注入的一种。

它允许恶意用户将代码注入到网页上，其他用户在观看网页时就会受到影响，这类攻击通常包含了 HTML 以及用户端脚本语言。

比如通过客户端脚本语言（最常见如：JavaScript）。

在一个论坛发帖中发布一段恶意的 JavaScript 代码就是脚本注入，如果这个代码内容有请求外部服务器，那么就叫做 XSS。

### XSS 攻击分类

反射性 XSS 攻击 (非持久性 XSS 攻击)。

持久性 XSS 攻击 (留言板场景)。

一般指 XSS 攻击代码存储在网站数据库，当一个页面被用户打开的时候执行。

也就是说，每当用户使用浏览器打开指定页面时，脚本便执行。

与非持久性 XSS 攻击相比，持久性 XSS 攻击危害性更大。

从名字就可以了解到，持久性 XSS 攻击就是将攻击代码存入数据库中，然后客户端打开时就执行这些攻击代码。

### CSRF

站请求伪造，是一种挟制用户在当前已登录的 Web 应用程序上执行非本意的操作的攻击方法。

如冒充用户发起请求（在用户不知情的情况下），完成一些违背用户意愿的请求（如恶意发帖，删帖，改密码，发邮件等）。

### DOS 攻击

DOS：

- 拒绝服务，
- 该攻击的效果是使得计算机或网络无法提供正常的服务。

DDOS：

- 分布式拒绝服务攻击。
- 指的是攻击者控制多台主机同时向同一主机或网络发起 DOS 攻击。
- 是 DDoS 攻击的变形。

### DOS 攻击的原理

首先攻击者向被攻击的服务器发送大量的虚假 IP 请求，被攻击者在收到请求后返回确认信息，等待攻击者进行确认，该过程需要 TCP 的三次握手，由于攻击者发送的请求信息是虚假的，

所以服务器接收不到返回的确认信息，在一段时间内服务器会处与等待状态，而分配给这次请求的资源却被有被释放。

当被攻击者等待一定的时间后，会因连接超时而断开，这时攻击者在次发送新的虚假信息请求，这样最终服务器资源被耗尽，直到瘫痪。

### DDOS 究竟如何攻击

目前最流行也是最好用的攻击方法就是使用 SYN-Flood 进行攻击，SYN-Flood 也就是 SYN 洪水攻击。

SYN-Flood 不会完成 TCP。

三次握手的第三步，也就是不发送确认连接的信息给服务器，这样，服务器无法完成第三次握手，但服务器不会立即放弃，服务器会不停的重试并等待一定的时间后放弃这个未完成的连接，这段时间叫做 SYN
timeout，这段时间大约 30 秒 - 2 分钟左右。

若是一个用户在连接时出现问题导致服务器的一个线程等待 1 分钟并不是什么大不了的问题，但是若有人用特殊的软件大量模拟这种情况，那后果就可想而知了。

一个服务器若是处理这些大量的半连接信息而消耗大量的系统资源和网络带宽，这样服务器就不会再有空余去处理普通用户的正常请求 (因为客户的正常请求比率很小)，

这样这个服务器就无法工作了，这种攻击就叫做 SYN-Flood 攻击。

到目前为止，进行 DDoS 攻击的防御还是比较困难的。

首先，这种攻击的特点是它利用了 TCP / IP 协议的漏洞，除非你不用 TCP / IP，才有可能完全抵御住 DDoS 攻击。

不过这不等于我们就没有办法阻挡 DDoS 攻击，我们可以尽力来减少 DDoS 的攻击。

### DOS 防御

1. 关闭不必要的服务。
2. 限制同时打开的 SYN 半连接数目。
3. 缩短 SYN 半连接的 time out 时间。
4. 正确设置防火墙。
5. 禁止对主机的非开放服务的访问。
6. 限制特定 IP 地址的访问。
7. 启用防火墙的防 DDoS 的属性。

### XSS

---

## 提高部分

---

---







---

参考链接：

- [计算机网络常用知识总结](https://mp.weixin.qq.com/s?__biz=MzUyOTg1OTkyMA==&mid=2247486942&idx=1&sn=547fc2f0586a0e5e0003549afc50022e)

---













