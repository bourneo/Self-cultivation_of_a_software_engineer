# JVM

---

## 基础部分

---

### JVM 垃圾回收原理

视频讲解：[老 k 动画 - jvm 垃圾回收原理](https://www.bilibili.com/video/BV1W44y1477T)

### JVM 垃圾回收算法

视频讲解：[【java】10 分钟，了解 GC 过程](https://www.bilibili.com/video/BV1dt411u7wi)

垃圾回收的判断标准：

> 是否被 GCRoot 直接引用或间接引用。

**四种垃圾回收算法**：

> 标记清理算法：缺点是有碎片。
>
> 标记整理算法：缺点是代价大。
>
> 复制算法：缺点是需要两倍内存。
>
> 分代回收算法。

### JVM 垃圾收集器

视频讲解：[【java】垃圾收集器 | g1 收集器](https://www.bilibili.com/video/BV13J411g7A1)

历代垃圾收集器：

| # | 新生代 | 老年代 | 新生代和老年代收集器 |
|:---|:---|:---|:---|
| 01 | Serial（单线程） | Serial Old（单线程） |  |
| 02 | ParNew | CMS（最短回收停顿时间） |  |
| 03 | Parallel Scavenge（吞吐量优先） | Parallel Old（注重吞吐量） | G1 |

**Garbage-First / G1 收集器：**

G1 收集器是一款面向服务端应用的垃圾收集器，目前是 JDK9 的默认垃圾收集器。

是在 Java7 update4 之后引入的一个新的垃圾回收器，是当今收集器技术发展的最前沿成果之一。

G1 特点：

> 并行与并发。G1 能充分利用多 CPU，多核环境下的硬件优势。
>
> 分代收集。能够采用不同的方式去处理新创建的对象和已经存活了一段时间的对象，不需要与其他收集器进行合作。
>
> 空间整合。G1 从整体上来看基于 “标记 - 整理” 算法实现的收集器，从局部上看是基于复制算法实现的，因此 G1 运行期间不会产生空间碎片。
>
> 可预测的停顿。G1 能建立可预测的时间停顿模型，能让使用者明确指定一个长度为 M 毫秒的时间片段内，消耗在垃圾收集上的时间不得超过 N 毫秒。

G1 适用场景：

> 要求尽可能可控 GC 停顿时间；内存占用较大的应用。
>
> 可以用 -XX:+UseG1GC 使用 G1 收集器

