# Redis

---

## 核心部分

---

### Redis 为什么这么快（重点）

1、基于内存，没有磁盘 IO 的开销。

2、单线程实现（6.0 支持多线程）：没有多线程切换和锁竞争的开销，底层数据结构也不用考线程安全问题。

3、每种数据结构类型，底层都做了优化。

4、IO 多路服用模型：轮询描述符，把数据库操作转换成事件。

### 为什么 Redis 使用单线程还那么快

至于为什么单线程那么快我觉得主要有以下几个原因：

> Redis 的大部分操作都在内存中完成，内存中的执行效率本身就很快，并且采用了高效的数据结构，比如哈希表和跳表。
>
> 使用单线程避免了多线程的竞争，省去了多线程切换带来的时间和性能开销，并且不会出现死锁。
>
> 采用 I/O 多路复用机制处理大量客户端的 Socket 请求，因为这是基于非阻塞的 I/O 模型，这就让 Redis 可以高效地进行网络通信，I/O 的读写流程也不再阻塞。

### Redis 是单线程还是多线程

Redis 不同版本之间采用的线程模型是不一样的，在 Redis6.0 版本之前使用的是单线程模型，在 6.0 版本之后增加了多线程的支持。

在 6.0 之前虽然我们说 Redis 是单线程，也只是说它的网络 I/O 线程以及 Set 和 Get 操作是由一个线程完成的。但是 Redis 的持久化、集群同步还是使用其他线程来完成。

6.0 之后添加了多线程的支持，主要是体现在大数据的异步删除功能上，例如 unlink key、flushdb async、flushall async 等。

### 为什么 Redis 在 6.0 之前会选择使用单线程

选择单线程个人觉得主要是使用简单，不存在锁竞争，可以在无锁的情况下完成所有操作，不存在死锁和线程切换带来的性能和时间上的开销，

但同时单线程也不能完全发挥出多核 CPU 的性能。






---



